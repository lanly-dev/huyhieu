<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>HuyHieu Badge Visual Test</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #f9f9f9;
      color: #222;
      margin: 0;
      padding: 2rem;
      transition: background 0.2s, color 0.2s;
    }

    body.dark {
      background: #181818;
      color: #eee;
    }

    h1 {
      font-size: 2rem;
    }

    .demo-row {
      margin-bottom: 1.5rem;
      display: grid;
      grid-template-columns: 150px auto 1fr;
      gap: 1rem;
      align-items: center;
    }

    .demo-label {
      display: inline-block;
      width: 150px;
      vertical-align: top;
      font-weight: bold;
    }

    .demo-url {
      font-family: monospace;
      font-size: 0.9em;
      background: rgba(0, 0, 0, 0.1);
      padding: 0.2em 0.5em;
      border-radius: 4px;
      word-break: break-all;
      width: 500px;
    }


    .badge-img {
      background: #fff;
      box-shadow: 0 1px 4px #0001;
      margin-left: 10px;
      vertical-align: middle;
    }

    .toggle-btn {
      margin-bottom: 2rem;
      padding: 0.5em 1.2em;
      font-size: 1em;
      border-radius: 6px;
      border: 1px solid #ccc;
      background: #fff;
      color: #222;
      cursor: pointer;
    }

    body.dark .toggle-btn {
      background: #222;
      color: #fff;
      border-color: #444;
    }

    body.dark .demo-url {
      background: rgba(255, 255, 255, 0.1);
    }
  </style>
</head>

<body>
  <button class="toggle-btn" onclick="toggleBg()">Switch to Dark</button>
  <h1>HuyHieu Badge Visual Test (<span id="host-label"></span>)</h1>
  <div style="margin-bottom:1.5rem">
    <label>Label: <input id="input-label" type="text" style="width:120px" value="GitHub"></label>
    <label style="margin-left:1em">Value: <input id="input-value" type="text" style="width:120px" value="Text"></label>
    <span style="margin-left:1em">Shape:
      <label><input type="radio" name="shape" value="rect" checked> Rect</label>
      <label><input type="radio" name="shape" value="parallelogram"> Parallelogram</label>
    </span>
    <button id="update-btn" style="margin-left:1em">Update All</button>
    <button id="reset-btn" style="margin-left:0.5em">Reset</button>
    <button id="clear-btn" style="margin-left:0.5em">Clear</button>
  </div>
  <div id="demo-badges"></div>
  <script>
    const labelInput = document.getElementById('input-label')
    const valueInput = document.getElementById('input-value')
    const updateBtn = document.getElementById('update-btn')
    const clearBtn = document.getElementById('clear-btn')
    const resetBtn = document.getElementById('reset-btn')
    function toggleBg() {
      document.body.classList.toggle('dark')
      const btn = document.querySelector('.toggle-btn');
      if (document.body.classList.contains('dark')) btn.textContent = 'Switch to Light'
      else btn.textContent = 'Switch to Dark'
    }
    const host = 'http://localhost:8000'
    document.getElementById('host-label').textContent = host
    const shapeRadios = document.querySelectorAll('input[name="shape"]')
    function getSelectedShape() {
      return Array.from(shapeRadios).find(r => r.checked)?.value || 'rect'
    }
    // Only keep parallelogram/rect as shape radio, keep other effect attributes as before
    const demos = [
      { label: 'Default', q: '' },
      { label: 'Favicon only', q: '?url=github.com' },
      { label: 'Favicon + Label', q: '?url=github.com&label=GitHub' },
      { label: 'Favicon + Value', q: '?url=github.com&value=Text' },
      { label: 'Favicon + Label + Value', q: '?url=github.com&label=GitHub&value=Text' },
      { label: 'Custom Color', q: '?url=github.com&label=GitHub&value=Text&color=%2300bfff' },
      { label: 'Small Size', q: '?url=github.com&label=GitHub&value=Text&size=small' },
      { label: 'Medium Size', q: '?url=github.com&label=GitHub&value=Text&size=medium' },
      { label: 'Large Size', q: '?url=github.com&label=GitHub&value=Text&size=large' },
      { label: 'Border Radius 10', q: '?url=github.com&label=GitHub&value=Text&radius=10' },
      { label: 'No Label, Only Icon', q: '?url=github.com' }
    ]
    function getShapeQuery() {
      const shape = getSelectedShape()
      return shape === 'parallelogram' ? '&shape=parallelogram' : ''
    }
    function updateBadges() {
      const labelVal = encodeURIComponent(labelInput.value)
      const valueVal = encodeURIComponent(valueInput.value)
      const shapeQ = getShapeQuery()
      demos.forEach((d, i) => {
        let url = host + '/huyhieu' + d.q
        url = url.replace(/([&?])label=[^&]*/g, '')
        url = url.replace(/([&?])value=[^&]*/g, '')
        url = url.replace(/([&?])shape=[^&]*/g, '')
        if (labelVal) url += (url.includes('?') ? '&' : '?') + 'label=' + labelVal
        if (valueVal) url += (url.includes('?') ? '&' : '?') + 'value=' + valueVal
        if (shapeQ) url += shapeQ
        const row = demoDiv.children[i]
        row.querySelector('img').src = url
        row.querySelector('.demo-url').textContent = url.replace(host, '')
      })
    }
    shapeRadios.forEach(radio => radio.addEventListener('change', updateBadges))
    // Patch updateBtn to use updateBadges
    updateBtn.onclick = updateBadges
    // Patch clear/reset
    clearBtn.onclick = function () {
      labelInput.value = ''
      valueInput.value = ''
      updateBadges()
    }
    resetBtn.onclick = function () {
      labelInput.value = 'GitHub'
      valueInput.value = 'Text'
      updateBadges()
    }
    const demoDiv = document.getElementById('demo-badges')
    demos.forEach(d => {
      const row = document.createElement('div')
      row.className = 'demo-row'
      const label = document.createElement('span')
      label.className = 'demo-label'
      label.textContent = d.label
      const img = document.createElement('img')
      img.className = 'badge-img'
      img.src = host + '/huyhieu' + d.q
      img.style.height = 'auto'
      img.style.width = 'auto'
      const urlSpan = document.createElement('span')
      urlSpan.className = 'demo-url'
      urlSpan.textContent = '/huyhieu' + d.q
      row.appendChild(label)
      row.appendChild(urlSpan)
      row.appendChild(img)
      demoDiv.appendChild(row)
    })
  </script>
</body>

</html>